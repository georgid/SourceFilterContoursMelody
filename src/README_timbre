
1. extract contours with essentia with SAL features: 
src.main_contour_extraction.create_contours_and_store
output .pitch.ctr in folder Parameters.contour_URI

load extracted ctrs and add timbre features: (one can set normalize to false) 
load_contour_and_extractTimbre_and_save

label them according annotations: 
src.main_contour_extraction.load_labeled_contours


in run_contour_training_melody_extraction
train and classify: 
src.contour_classification.run_contour_training_melody_extraction.train_and_classify
src.contour_classification.run_contour_training_melody_extraction.eval
------

2. run_contour_training_melody_extraction.py

- 3.1 for all contours overlap with ground truth eu.compute_all_overlaps

- cross validate best depth of CRF cu.cross_val_sweep

- classify all contours and get scikitlearn metrics: cu.clf_predictions

- get threshold with best f-measure on validation dataset get_best_threshold(Y_valid, P_valid) on validation

- classify test contours : contour_probs

- melody decoding: gm.melody_from_clf



-------------
plot interactively contorus:  
see test_feature_weights:
plot_contours_interactive(contour_data, dset_annot_dict[track], track)

and plot the decoded melody 
plot_decoded_melody


test_timbre_features- extract features with already extracted contour


compute_and_plot_harmoncis


------------------------
NOTES: 11.09. 
Parameters.features_MATLAB - used in src.timbreFeatures.compute_timbre_features to load from matlab or calculate
Parameters.onlyTimbre - used in 	src.contour_classification.contour_utils.getFeatureInfo


only one extension: pitch.ctr with timbre features as well

PATH_CONTOURS=Conv_mu-1_G-0_LHSF-0_pC-27.56_pDTh-0.9_pFTh-0.9_tC-100_mD-200_vxTol-0.2_LEH/
# get contours
cp /home/georgid/Documents/iKala/Conv_mu-1_G-0_LHSF-0_pC-27.56_pDTh-0.9_pFTh-0.9_tC-100_mD-200_vxTol-0.2/*.pitch.ctr  $PATH_CONTOURS

# contours -to- audio
python ~/workspace/SourceFilterContoursMelody/src/main_contour_extraction.py ~/Documents/iKala/ 2 0 1  $PATH_CONTOURS

# extract feat. matlab.. Bernhard Lehner
from matlab /home/georgid/Documents/svd
then extractSVD2015features

# extract timbe
python ~/workspace/SourceFilterContoursMelody/src/main_contour_extraction.py ~/Documents/iKala/ 2 1 0  $PATH_CONTOURS

 